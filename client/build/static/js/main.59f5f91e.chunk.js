(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{243:function(e,t){},437:function(e,t){},438:function(e,t){},439:function(e,t){},440:function(e,t){},441:function(e,t){},447:function(e,t,n){},448:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),c=n.n(a),i=n(33),s=n.n(i),o=n(42),l=n(26),u=n(11),d=n.n(u),j=n(21),b=n(536),h=n(503),x=n(504),p=n(545),O=n(506),f=n(507),m=n(508),v=n(279),g=n(284),w=n(509),y=n(188),S=n.n(y),C={0:"Lowest",1:"Restricted",2:"Confidential",3:"Secret",4:"Top Secret"},k="http://localhost",_=function(){var e=localStorage.getItem("token"),t=S.a.create({headers:{"Content-Type":"application/json",Authorization:"Token ".concat(e)},baseURL:k});return t.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),t},R=S.a.create({baseURL:k}),z=function(e){return _().post("/api/auth/token/logout/")},L=function(e){return _.post("/account/reset-password",e)},A=n(34),P=n(158),G=n(146),E=n(247),F=Object(G.a)(Object(E.persist)((function(e,t){return{current:null,setUser:function(t){return e({current:t})},logout:function(){return e({current:null})},isAuth:function(){return null!==t().current}}}),{name:"user-storage"})),I=n(7);function D(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data){var a,c=null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.data;c=Object.entries(c);var i={};return c.forEach((function(e){var t=Object(I.a)(e,2),n=t[0],r=t[1];i[n]=r})),i}n&&r(n)}var q=n(79),T=n(494),N=n(45),H=N.a().shape({email:N.c().required("Email is required").defined(),password:N.c().required("Password is required").defined()}),W=N.a().shape({name:N.c().lowercase().required("Name is required").defined(),email:N.c().email().lowercase().required("Email is required").defined(),password:N.c().min(6,"Password must be at least 6 characters long").max(150).required("Password is required").defined()}),U=(N.a().shape({email:N.c().email().lowercase().required("Email is required").defined(),username:N.c().min(3).max(30).trim().required("Username is required").defined()}),N.a().shape({newPassword:N.c().min(6,"Password must be at least 6 characters long").max(150).required("New password is required").defined(),confirmNewPassword:N.c().oneOf([N.b("newPassword"),void 0],"Passwords do not match").required("Confirm new password is required").defined()})),B=N.a().shape({currentPassword:N.c().required("Old Password is required").defined(),newPassword:N.c().min(6,"Password must be at least 6 characters long").max(150).required("New password is required").defined(),confirmNewPassword:N.c().oneOf([N.b("newPassword"),void 0],"Passwords do not match").required("Confirm new password is required").defined()}),Y=N.a().shape({email:N.c().email().lowercase().required("Email is required").defined()}),M=n(97),V=n(84),Q=n(493),J=n(495),X=n(496);function K(e){var t=e.label,n=Object(M.a)(e,["label"]),a=Object(A.c)(n),c=Object(I.a)(a,2),i=c[0],s=c[1],o=s.error,u=s.touched;return Object(r.jsxs)(V.a,{mt:4,isInvalid:null!=o&&u,children:[Object(r.jsx)(Q.a,{htmlFor:i.name,children:Object(r.jsx)(T.a,{fontSize:"12px",textTransform:"uppercase",children:t})}),Object(r.jsx)(J.a,Object(l.a)(Object(l.a)({bg:"brandGray.dark",borderColor:"black",borderRadius:"3px",focusBorderColor:"highlight.standard"},i),n)),Object(r.jsx)(X.a,{children:o})]})}function Z(e){var t=e.isOpen,n=e.onClose,a=Object(b.a)();function c(){return(c=Object(j.a)(d.a.mark((function e(t,r){var c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.setErrors,e.prev=1,e.next=4,null;case 4:i=e.sent,i.data&&(a({title:"Changed Password",status:"success",duration:5e3,isClosable:!0}),n()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(D(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(r.jsxs)(q.a,{isOpen:t,onClose:n,isCentered:!0,children:[Object(r.jsx)(q.g,{}),Object(r.jsx)(q.d,{bg:"brandGray.light",children:Object(r.jsx)(A.b,{initialValues:{currentPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:B,onSubmit:function(e,t){return c.apply(this,arguments)},children:function(e){var t=e.isSubmitting;return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(q.f,{textAlign:"center",fontWeight:"bold",children:"Change your password"}),Object(r.jsx)(q.c,{}),Object(r.jsxs)(q.b,{pb:6,children:[Object(r.jsx)(T.a,{children:"Enter your current password and a new password"}),Object(r.jsx)(K,{label:"current password",name:"currentPassword",autoComplete:"password",type:"password"}),Object(r.jsx)(K,{label:"new password",name:"newPassword",autoComplete:"password",type:"password"}),Object(r.jsx)(K,{label:"confirm new password",name:"confirmNewPassword",autoComplete:"password",type:"password"})]}),Object(r.jsxs)(q.e,{bg:"brandGray.dark",children:[Object(r.jsx)(v.a,{onClick:n,fontSize:"14px",mr:6,variant:"link",children:"Cancel"}),Object(r.jsx)(v.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},isLoading:t,fontSize:"14px",children:"Done"})]})]})}})})]})}var $=n(502);function ee(e){var t=e.label,n=e.children,a=e.isDisabled,c=void 0!==a&&a,i=Object(M.a)(e,["label","children","isDisabled"]),s=Object(A.c)(i),o=Object(I.a)(s,2),u=o[0],d=o[1],j=d.error,b=d.touched;return Object(r.jsxs)(V.a,{mt:4,isInvalid:null!=j&&b,children:[Object(r.jsx)(Q.a,{htmlFor:u.name,children:Object(r.jsx)(T.a,{fontSize:"12px",textTransform:"uppercase",children:t})}),Object(r.jsx)($.a,Object(l.a)(Object(l.a)(Object(l.a)({bg:"brandGray.dark",borderColor:"black",borderRadius:"3px",focusBorderColor:"highlight.standard",isDisabled:c},u),i),{},{children:n})),Object(r.jsx)(X.a,{children:j})]})}var te=n(540),ne=n(544),re=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().get(t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().patch(t,n);case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().delete(t,n);case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().post(t,n,{headers:{"Content-Type":"multipart/form-data"}});case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("/api/auth/users/me/");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("/api/users/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("/api/users/");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae("/api/users/".concat(t.userId,"/"),t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function de(){return Object(te.a)("user",(function(){return se()}))}function je(){var e=Object(b.a)(),t=Object(P.b)();return Object(ne.a)(ue,{onSuccess:function(){t.invalidateQueries("users"),e({title:"User details updated",status:"success",duration:3e3,isClosable:!0})},onError:function(){e({title:"Error updating account",status:"error",duration:3e3,isClosable:!0})}})}function be(){var e=de(),t=e.data,n=e.isLoading,a=je();console.log({user:t});var c=Object(P.b)(),i=F((function(e){return e.logout})),s=Object(o.useHistory)(),u=(Object(b.a)(),Object(h.a)()),y=u.isOpen,S=u.onOpen,C=u.onClose;function k(){return(k=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:c.clear(),localStorage.removeItem("token"),i(),s.push("/"),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function _(){return(_=Object(j.a)(d.a.mark((function e(n,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=r.setErrors;try{delete(n=Object(l.a)(Object(l.a)({},n),{},{access_level:+n.accessLevel})).email,delete n.accessLevel,a.mutate(Object(l.a)(Object(l.a)({},n),{},{userId:null===t||void 0===t?void 0:t.pk}))}catch(i){c(D(i))}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n?Object(r.jsx)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(r.jsx)(p.a,{isIndeterminate:!0})}):(console.log({user:t}),Object(r.jsxs)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:[Object(r.jsxs)(O.a,{px:4,width:"full",maxWidth:"500px",children:[Object(r.jsx)(x.a,{mb:"4",justify:"center",children:Object(r.jsx)(f.a,{fontSize:"24px",children:"MY ACCOUNT"})}),Object(r.jsxs)(O.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(A.b,{initialValues:{email:null===t||void 0===t?void 0:t.email,name:null===t||void 0===t?void 0:t.name,accessLevel:null===t||void 0===t?void 0:t.access_level,role:null===t||void 0===t?void 0:t.role,image:null},onSubmit:function(e,t){return _.apply(this,arguments)},children:function(e){var t=e.isSubmitting,n=e.values;return Object(r.jsx)(A.a,{children:Object(r.jsxs)(O.a,{my:4,children:[Object(r.jsx)(K,{value:n.name,placeholder:"Full name",label:"name",name:"name",autoComplete:"name"}),Object(r.jsx)(K,{value:n.email,type:"email",placeholder:"Email",label:"Email",name:"email",autoComplete:"email"}),Object(r.jsxs)(ee,{value:n.accessLevel,label:"access level",name:"accessLevel",autoComplete:"access_level",isDisabled:!0,children:[Object(r.jsx)("option",{value:0,children:"Lowest"}),Object(r.jsx)("option",{value:1,children:"Restricted"}),Object(r.jsx)("option",{value:2,children:"Confidential"}),Object(r.jsx)("option",{value:3,children:"Secret"}),Object(r.jsx)("option",{value:4,children:"Top Secret"})]}),Object(r.jsxs)(ee,{value:n.role,label:"role",name:"role",autoComplete:"role",isDisabled:!0,children:[Object(r.jsx)("option",{value:1,children:"Admin"}),Object(r.jsx)("option",{value:2,children:"Normal"})]}),Object(r.jsxs)(x.a,{my:8,align:"end",children:[Object(r.jsx)(m.a,{}),Object(r.jsx)(v.a,{mr:4,colorScheme:"white",variant:"outline",onClick:s.goBack,fontSize:"14px",children:"Close"}),Object(r.jsx)(g.c,{children:Object(r.jsx)(v.a,{type:"submit",colorScheme:"green",isLoading:t,fontSize:"14px",children:"Update"})})]})]})})}})}),Object(r.jsx)(w.a,{my:"4"}),Object(r.jsx)(x.a,{children:Object(r.jsx)(f.a,{fontSize:"18px",children:"PASSWORD AND AUTHENTICATION"})}),Object(r.jsxs)(x.a,{mt:"8",children:[Object(r.jsx)(v.a,{background:"highlight.standard",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},onClick:S,fontSize:"14px",children:"Change Password"}),Object(r.jsx)(m.a,{}),Object(r.jsx)(v.a,{colorScheme:"red",variant:"outline",onClick:function(){return k.apply(this,arguments)},fontSize:"14px",children:"Logout"})]})]})]}),y&&Object(r.jsx)(Z,{isOpen:y,onClose:C})]}))}function he(e){var t=e.component,n=Object(M.a)(e,["component"]),a=(F((function(e){return e.current})),localStorage.getItem("token"));return Object(r.jsx)(o.Route,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return a?Object(r.jsx)(t,Object(l.a)({},e)):Object(r.jsx)(o.Redirect,{to:"/login"})}}))}var xe=n(510);function pe(){var e=Object(o.useHistory)(),t=Object(b.a)(),n=function(){var n=Object(j.a)(d.a.mark((function n(r,a){var c,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=a.setErrors,n.prev=1,n.next=4,s=r.email,_.post("/account/forgot-password",{email:s});case 4:i=n.sent,i.data&&(t({title:"Reset  password",description:"If an account with that email exists, we sent you an email",status:"success",duration:5e3,isClosable:!0}),e.push("/")),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),c(D(n.t0));case 12:case"end":return n.stop()}var s}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}();return Object(r.jsx)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(r.jsxs)(O.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(r.jsx)(x.a,{mb:"4",justify:"center",children:Object(r.jsx)(xe.a,{src:"/logo.png",w:"80px"})}),Object(r.jsxs)(O.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(r.jsx)(O.a,{textAlign:"center",children:Object(r.jsx)(f.a,{fontSize:"24px",children:"Forgot Password"})}),Object(r.jsx)(O.a,{my:4,textAlign:"left",children:Object(r.jsx)(A.b,{initialValues:{email:""},validationSchema:Y,onSubmit:n,children:function(e){var t=e.isSubmitting;return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(K,{label:"Email",name:"email",autoComplete:"email",type:"email"}),Object(r.jsx)(v.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:t,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},fontSize:"14px",children:"Send Mail"})]})}})})]})]})})}var Oe=n(511);function fe(e){var t=e.showLastColumn,n=void 0!==t&&t,a=e.children;return Object(r.jsx)(Oe.a,{height:"100vh",templateColumns:"75px 240px 1fr ".concat(n?"240px":""," "),templateRows:"auto 1fr auto",bg:"brandGray.light",children:a})}var me=n(516),ve=n(277),ge=n(107),we=function(e){var t=e.open,n=e.handleClose,a=e.handleSubmit,i=e.isLoading,s=void 0!==i&&i,o=Object(ge.useHistory)(),l=c.a.useMemo((function(){return s}),[s]);return l?Object(r.jsx)("div",{children:"is loading..."}):Object(r.jsx)(ve.a,{acceptedFiles:[".pdf"],cancelButtonText:"cancel",submitButtonText:"upload",filesLimit:3,maxFileSize:5e9,open:t,onClose:n,onSave:function(e){!function(e){a(e),n(),o.push("/files")}(e)},showPreviews:!0,showFileNamesInPreview:!0,useChipsForPreview:!0})},ye=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("/api/files/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("/api/files/");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae("/api/files/".concat(t.fileId),t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce("/api/files/".concat(t.fileId));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie("/api/files/upload",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Re(e){var t=e.isOpen,n=e.onClose,a=function(){var e=Object(b.a)(),t=Object(P.b)();return Object(ne.a)(_e,{onSuccess:function(){t.invalidateQueries("files"),e({title:"File uploaded",status:"success",duration:3e3,isClosable:!0})},onError:function(){e({title:"Error uploading file",status:"error",duration:3e3,isClosable:!0})}})}();return Object(r.jsx)(we,{open:t,handleClose:function(){n()},handleSubmit:function(e){var t=new FormData;e.forEach((function(e){t.append("file",e)})),a.mutate(t)}})}var ze=n(271),Le=n(542);function Ae(e){var t=e.label,n=e.position,a=e.disabled,c=void 0!==a&&a,i=e.children;return Object(r.jsx)(Le.a,{hasArrow:!0,label:t,placement:n,isDisabled:c,bg:"brandGray.darkest",color:"white",fontWeight:"semibold",py:1,px:3,children:i})}function Pe(){return Object(r.jsx)(O.a,{w:"8px",h:"40px",bg:"white",position:"absolute",borderRadius:"0 4px 4px 0",ml:"-4px",left:0,mt:"4px"})}function Ge(){return Object(r.jsx)(O.a,{w:"8px",h:"24px",bg:"white",position:"absolute",borderRadius:"0 4px 4px 0",ml:"-4px",left:0,mt:"12px"})}function Ee(e){var t=e.onOpen,n=Object(a.useState)(!1),c=Object(I.a)(n,2),i=c[0],s=c[1];return Object(r.jsxs)(r.Fragment,{children:[i&&Object(r.jsx)(Ge,{}),Object(r.jsx)(Ae,{label:"Add a new file",position:"right",children:Object(r.jsx)(x.a,{direction:"column",m:"auto",align:"center",justify:"center",bg:"brandGray.light",borderRadius:"50%",h:"48px",w:"48px",_hover:{cursor:"pointer",borderRadius:"35%",bg:"brandGreen",color:"white"},onClick:t,onMouseLeave:function(){return s(!1)},onMouseEnter:function(){return s(!0)},children:Object(r.jsx)(ze.a,{fontSize:"25px"})})})]})}var Fe=n(113),Ie=n(85),De=n(29),qe=Object(G.a)((function(e){return{notifCount:0,requestCount:0,increment:function(){return e((function(e){return{notifCount:e.notifCount+1}}))},reset:function(){return e((function(){return{notifCount:0}}))},resetRequest:function(){return e((function(){return{requestCount:0}}))},setRequests:function(t){return e((function(){return{requestCount:t}}))},isPending:!1,toggleDisplay:function(){return e((function(e){return{isPending:!e.isPending}}))}}}));function Te(e){var t=e.count;return Object(r.jsx)(x.a,{borderRadius:"50%",bg:"menuRed",position:"absolute",bottom:0,right:0,transform:"translate(25%, 25%)",border:"0.2em solid",borderColor:"brandBorder",w:"1.4em",h:"1.4em",justify:"center",align:"center",children:Object(r.jsx)(T.a,{fontSize:"11px",fontWeight:"bold",children:t})})}function Ne(){var e="/channels/me"===Object(o.useLocation)().pathname,t=Object(a.useState)(!1),n=Object(I.a)(t,2),c=n[0],i=n[1],s=qe((function(e){return e.notifCount})),l=qe((function(e){return e.reset}));return Object(a.useEffect)((function(){e&&l()})),Object(r.jsx)(Ae,{label:"Home",position:"right",children:Object(r.jsxs)(x.a,{direction:"column",my:"2",align:"center",children:[e&&Object(r.jsx)(Pe,{}),c&&Object(r.jsx)(Ge,{}),Object(r.jsx)(De.b,{to:"/home",children:Object(r.jsxs)(x.a,{direction:"column",m:"auto",align:"center",justify:"center",bg:e?"highlight.standard":"brandGray.light",borderRadius:e?"35%":"50%",h:"48px",w:"48px",color:"white",position:"relative",_hover:{cursor:"pointer",borderRadius:"35%",bg:"highlight.standard"},onMouseLeave:function(){return i(!1)},onMouseEnter:function(){return i(!0)},children:[Object(r.jsx)(Fe.a,{as:Ie.c}),s>0&&Object(r.jsx)(Te,{count:s})]})}),Object(r.jsx)(w.a,{mt:"2",w:"40px"})]})})}var He={"&::-webkit-scrollbar":{width:"0"}};function We(){var e=Object(h.a)(),t=e.isOpen,n=e.onOpen,a=e.onClose,c=de().data,i=1===(null===c||void 0===c?void 0:c.role);return Object(r.jsxs)(Oe.b,{gridColumn:1,gridRow:"1 / 4",bg:"brandGray.darker",overflowY:"auto",css:He,zIndex:2,children:[Object(r.jsx)(Ne,{}),Object(r.jsx)(me.a,{listStyleType:"none",ml:"0",children:"guilds"}),i&&Object(r.jsx)(Ee,{onOpen:n}),t&&Object(r.jsx)(Re,{isOpen:t,onClose:a}),Object(r.jsx)(O.a,{h:"20px"})]})}function Ue(e){var t=e.handleSearch;return Object(r.jsx)(Oe.b,{gridColumn:3,gridRow:"1",bg:"brandGray.light",padding:"10px",zIndex:"2",boxShadow:"md",children:Object(r.jsx)(x.a,{align:"center",justify:"space-between",p:"2",children:Object(r.jsx)(J.a,{placeholder:"Search files",onChange:t})})})}var Be=n(524),Ye=n(526),Me=n(538),Ve=n(527),Qe=n(272),Je=n.n(Qe),Xe=n(525),Ke=n(523),Ze=n(520),$e=n(537),et=n(535),tt=n(521),nt=n(522),rt=n(514),at=n(513),ct=n(198),it=n(518),st=n(519),ot=n(517),lt=n(168),ut={global:function(e){return{body:{bg:Object(lt.a)("gray.100","#1b1c1d")(e)}}}},dt=Object(ot.a)({colors:{highlight:{standard:"#7289da",hover:"#677bc4",active:"#5b6eae"},brandGray:{accent:"#8e9297",active:"#393c43",light:"#36393f",dark:"#303339",darker:"#202225",darkest:"#18191c",hover:"#32353b"},brandGreen:"#43b581",labelGray:"#72767d",menuRed:"#f04747",brandBorder:"#1A202C",accountBar:"#292b2f",memberList:"#2f3136",iconColor:"#b9bbbe",messageInput:"#40444b"},config:{initialColorMode:"dark"},styles:ut,fonts:{body:"'Open Sans', sans-serif"}}),jt={"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"#2f3136",width:"10px"},"&::-webkit-scrollbar-thumb":{background:"gray",borderRadius:"18px"}};function bt(e){var t=e.pdfFile,n=Object(a.useState)(null),c=Object(I.a)(n,2),i=c[0],s=c[1],o=Object(a.useState)(1),l=Object(I.a)(o,2),u=l[0],d=l[1];function j(e){d((function(t){return t+e}))}return Object(r.jsxs)(O.a,{css:jt,children:[Object(r.jsx)(ct.a,{file:t,options:{workerSrc:"/pdf.worker.js"},onLoadSuccess:function(e){var t=e.numPages;s(t),d(1)},children:Object(r.jsx)(ct.b,{pageNumber:u})}),Object(r.jsx)("div",{style:{color:"black",paddingLeft:"2em",paddingRight:"2em",position:"absolute",bottom:"1.5%",left:"50%",transform:"translateX(-50%)",background:"rgba(200,200,200, 0.9)"},children:Object(r.jsxs)(x.a,{w:"full",justify:"center",align:"center",children:[Object(r.jsx)("button",{disabled:u<=1,type:"button",onClick:function(){j(-1)},children:Object(r.jsx)(it.a,{})}),Object(r.jsxs)(T.a,{fontSize:"sm",children:[u||(i?1:"--")," of ",i||"--"]}),Object(r.jsx)("button",{type:"button",disabled:u>=i,onClick:function(){j(1)},children:Object(r.jsx)(st.a,{})})]})})]})}var ht=a.forwardRef((function(e,t){return Object(r.jsx)(Ze.a,Object(l.a)({direction:"up",ref:t},e))}));function xt(e){var t=e.open,n=e.handleClose,a=e.file;return Object(r.jsx)($e.a,{fullScreen:!0,open:t,onClose:n,TransitionComponent:ht,children:Object(r.jsxs)(et.a,{bgcolor:"#1b1c1d",style:{height:"100vh"},children:[Object(r.jsx)(tt.a,{style:{position:"relative",background:"#202225"},children:Object(r.jsxs)(nt.a,{children:[Object(r.jsx)(rt.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close",children:Object(r.jsx)(Ke.a,{})}),Object(r.jsx)(at.a,{children:null===a||void 0===a?void 0:a.name})]})}),Object(r.jsx)(et.a,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"95%"},children:Object(r.jsx)(bt,{pdfFile:"".concat(null===a||void 0===a?void 0:a.document)})})]})})}function pt(e){var t,n=e.file,a=Object(o.useHistory)(),i=c.a.useState(!1),s=Object(I.a)(i,2),l=s[0],u=s[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Be.f,{_hover:{bg:"brandGray.dark"},children:[Object(r.jsx)(Be.c,{children:Object(r.jsxs)(x.a,{align:"center",w:"full",_hover:{cursor:"pointer"},children:[Object(r.jsx)(Fe.a,{as:Xe.a,color:"red.200"}),Object(r.jsx)(T.a,{ml:"2",fontSize:"sm",mr:"1",pr:"1",maxWidth:"64",children:null===n||void 0===n?void 0:n.name})]})}),Object(r.jsx)(Be.c,{children:Object(r.jsx)(Ye.a,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"cyan",children:Object(r.jsx)(Ye.b,{children:C[null===n||void 0===n?void 0:n.access_level]})})}),Object(r.jsx)(Be.c,{children:Object(r.jsx)(T.a,{ml:"2",fontSize:"sm",children:Je()(null===n||void 0===n?void 0:n.updated).format("DD MMM YYYY")})}),Object(r.jsx)(Be.c,{children:Object(r.jsx)(T.a,{ml:"2",fontSize:"sm",children:null===n||void 0===n||null===(t=n.uploaded_by)||void 0===t?void 0:t.email})}),Object(r.jsx)(Be.c,{children:Object(r.jsxs)(Me.a,{children:[Object(r.jsx)(Me.b,{as:Ve.a,"aria-label":"Options",icon:Object(r.jsx)(Ie.b,{}),variant:"outline"}),Object(r.jsxs)(Me.d,{children:[Object(r.jsx)(Me.c,{icon:Object(r.jsx)(Ie.d,{}),command:"\u2318T",onClick:function(){return a.push("/files/".concat(null===n||void 0===n?void 0:n.uuid))},children:"File details"}),Object(r.jsx)(Me.c,{icon:Object(r.jsx)(Ie.a,{}),command:"\u2318O",onClick:function(){u(!0)},children:"Open File..."})]})]})})]}),l&&Object(r.jsx)(xt,{open:l,handleClose:function(){u(!1)},file:n,pdfFile:"".concat(n.document)})]})}function Ot(e){var t=e.label;return Object(r.jsx)(T.a,{fontSize:"12px",color:"brandGray.accent",textTransform:"uppercase",fontWeight:"semibold",mx:"4",mt:"4",mb:"4",w:"50%",children:t})}function ft(e){var t=e.files;return 0===(null===t||void 0===t?void 0:t.length)?Object(r.jsx)(x.a,{justify:"center",align:"center",w:"full",children:Object(r.jsx)(T.a,{textColor:"brandGray.accent",children:"No files to display"})}):Object(r.jsxs)(O.a,{w:"full",children:[Object(r.jsx)(Ot,{label:"Files \u2014 ".concat((null===t||void 0===t?void 0:t.length)||0)}),Object(r.jsxs)(Be.a,{w:"full",children:[Object(r.jsx)(Be.e,{bg:"brandGray.darker",p:"2",mx:"2",children:Object(r.jsxs)(Be.f,{children:[Object(r.jsx)(Be.d,{children:"Name"}),Object(r.jsx)(Be.d,{children:"Access level"}),Object(r.jsx)(Be.d,{children:"Last Modified"}),Object(r.jsx)(Be.d,{children:"Uploaded by"}),Object(r.jsx)(Be.d,{children:"Action"})]})}),Object(r.jsx)(Be.b,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(r.jsx)(pt,{file:e},e.uuid)}))})]})]})}function mt(){return Object(r.jsx)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(r.jsx)(p.a,{isIndeterminate:!0})})}function vt(e){var t=c.a.useState([]),n=Object(I.a)(t,2),r=n[0],a=n[1];c.a.useState((function(){a(e)}),[e]);var i=r||e;return null===i||void 0===i||i.sort((function(e,t){return new Date(t.updated)-new Date(e.updated)})),{filteredData:i,handleSearch:function(t){var n,r=t.target.value.toLowerCase();n=null===e||void 0===e?void 0:e.filter((function(e){var t;return-1!==(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase().search(r))})),a(n)}}}function gt(){var e=Object(te.a)("files",(function(){return Se()})),t=e.data,n=e.isLoading,a=vt(t),c=a.filteredData,i=a.handleSearch;return n?Object(r.jsx)(mt,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ue,{handleSearch:i}),Object(r.jsx)(Oe.b,{gridColumn:3,gridRow:"2",bg:"brandGray.light",mr:"5px",display:"flex",overflowY:"auto",css:jt,children:Object(r.jsx)(ft,{files:c||t})})]})}function wt(e){var t=e.linkTo,n=void 0===t?"":t,a=e.title,c=void 0===a?"":a,i=e.icon,s="".concat(n),l=Object(o.useLocation)().pathname===s;return Object(r.jsx)(De.b,{to:n,children:Object(r.jsx)(x.a,{m:"2",p:"3",align:"center",justify:"space-between",color:l?"#fff":"brandGray.accent",_hover:{bg:"brandGray.light",borderRadius:"5px",cursor:"pointer",color:"#fff"},bg:l?"brandGray.active":void 0,children:Object(r.jsxs)(x.a,{align:"center",children:[Object(r.jsx)(Fe.a,{as:i,fontSize:"20px"}),Object(r.jsx)(T.a,{fontSize:"14px",ml:"4",fontWeight:"semibold",children:c})]})})})}var yt=n(528),St=n(529),Ct=n(274);function kt(){var e,t=de().data,n=Object(yt.a)((null===t||void 0===t?void 0:t.pk)||""),a=n.hasCopied,c=n.onCopy,i=null===t||void 0===t||null===(e=t.name)||void 0===e?void 0:e.split(" ")[0];return Object(r.jsxs)(x.a,{p:"10px",pos:"absolute",bottom:"0",w:"240px",bg:"accountBar",align:"center",justify:"space-between",children:[Object(r.jsx)(Le.a,{hasArrow:!0,label:a?"Copied!":"Click to copy ID",placement:"top",bg:a?"brandGreen":"brandGray.darkest",color:"white",closeOnClick:!1,children:Object(r.jsxs)(x.a,{align:"center",w:"full",mr:2,_hover:{cursor:"pointer"},onClick:c,children:[Object(r.jsx)(St.a,{size:"sm",src:null===t||void 0===t?void 0:t.image}),Object(r.jsx)(T.a,{ml:"2",children:i})]})}),Object(r.jsx)(De.b,{to:"/account",children:Object(r.jsx)(Le.a,{hasArrow:!0,label:"User Settings",placement:"top",bg:"brandGray.darkest",color:"white",children:Object(r.jsx)(Ve.a,{icon:Object(r.jsx)(Ct.a,{}),"aria-label":"settings",size:"sm",fontSize:"20px",variant:"ghost"})})})]})}var _t={"&::-webkit-scrollbar":{width:"4px"},"&::-webkit-scrollbar-track":{width:"4px"},"&::-webkit-scrollbar-thumb":{background:"brandGray.darker",borderRadius:"18px"}},Rt=n(197);function zt(){var e=de(),t=e.data,n=(e.isLoading,1===(null===t||void 0===t?void 0:t.role));return Object(r.jsxs)(Oe.b,{gridColumn:"2",gridRow:"1 / 4",bg:"brandGray.dark",overflowY:"hidden",_hover:{overflowY:"auto"},css:_t,children:[Object(r.jsx)(wt,{linkTo:"/home",title:"Files",icon:Rt.a}),n&&Object(r.jsx)(wt,{linkTo:"/users",title:"Users",icon:Rt.b}),Object(r.jsx)(kt,{})]})}function Lt(){return Object(r.jsxs)(fe,{children:[Object(r.jsx)(We,{}),Object(r.jsx)(zt,{}),Object(r.jsx)(gt,{})]})}var At=n(530);function Pt(){return Object(r.jsx)(x.a,{bottom:0,as:"footer",align:"center",justify:"center",w:"100%",p:8,children:Object(r.jsx)(O.a,{textAlign:"center",children:Object(r.jsx)(T.a,{fontSize:"xl",children:Object(r.jsxs)("span",{children:["File Drive | ",(new Date).getFullYear()]})})})})}function Gt(){return Object(r.jsx)(T.a,{fontSize:"lg",fontWeight:"extrabold",children:"File Drive"})}function Et(){var e=F((function(e){return e.current}));return Object(r.jsxs)(x.a,{as:"nav",align:"center",justify:"space-between",wrap:"wrap",w:"100%",mb:8,p:8,children:[Object(r.jsx)(x.a,{align:"center",children:Object(r.jsx)(Gt,{})}),Object(r.jsx)(x.a,{align:"center",justify:"flex-end",children:e?Object(r.jsx)(De.b,{to:"/home",children:Object(r.jsx)(v.a,{_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},size:"md",rounded:"md",variant:"outline",children:"Open App"})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(De.b,{to:"/login",children:Object(r.jsx)(v.a,{color:"white",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},size:"md",rounded:"md",variant:"outline",mx:"4",children:"Login"})}),Object(r.jsx)(De.b,{to:"/register",children:Object(r.jsx)(v.a,{_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},size:"md",rounded:"md",variant:"outline",children:"Register"})})]})})]})}function Ft(e){var t=e.children;return Object(r.jsxs)(x.a,{direction:"column",align:"center",maxW:{xl:"1200px"},m:"0 auto",children:[Object(r.jsx)(Et,{}),t,Object(r.jsx)(Pt,{})]})}var It=n(546);function Dt(e){var t=e.title,n=e.subtitle,a=e.image,c=e.ctaLink,i=e.ctaText,s=Object(M.a)(e,["title","subtitle","image","ctaLink","ctaText"]);return Object(r.jsxs)(x.a,Object(l.a)(Object(l.a)({align:"center",justify:{base:"center",md:"space-around",xl:"space-between"},direction:{base:"column-reverse",md:"row"},wrap:"nowrap",minH:"70vh",px:8,mb:16},s),{},{children:[Object(r.jsxs)(It.a,{spacing:4,w:{base:"80%",md:"40%"},align:["center","center","flex-start","flex-start"],children:[Object(r.jsx)(f.a,{as:"h1",size:"xl",fontWeight:"bold",textAlign:["center","center","left","left"],children:t}),Object(r.jsx)(f.a,{as:"h2",size:"md",opacity:"0.8",fontWeight:"normal",lineHeight:1.5,textAlign:["center","center","left","left"],children:n}),Object(r.jsx)(De.b,{to:c,children:Object(r.jsx)(v.a,{colorScheme:"blue",borderRadius:"8px",py:"4",px:"4",lineHeight:"1",size:"md",children:i})}),Object(r.jsxs)(T.a,{fontSize:"xs",mt:2,textAlign:"center",opacity:"0.6",children:["Got an account already?"," ",Object(r.jsx)(At.a,{as:De.b,to:"/login",children:"Sign in"})]})]}),Object(r.jsx)(O.a,{w:{base:"80%",sm:"60%",md:"50%"},mb:{base:12,md:0},children:Object(r.jsx)(xe.a,{src:a,size:"50%",rounded:"1rem"})})]}))}function qt(){return Object(r.jsx)(Ft,{children:Object(r.jsx)(Dt,{title:"File Drive",subtitle:"A file management system",image:"/landing-doc.jpeg",ctaText:"Get Started",ctaLink:"/register"})})}function Tt(){var e=c.a.useState(null),t=Object(I.a)(e,2),n=t[0],a=t[1],i=Object(o.useHistory)(),s=F((function(e){return e.setUser})),l=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,c,o,l,u,j,b,h,x,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,e.prev=1,e.next=4,d=t,R.post("/api/auth/token/login",d);case 4:c=e.sent,(o=c.data)&&(l=o.auth_token,s(l),localStorage.setItem("token",l),i.push("/home")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log({err:e.t0}),401===(null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status)?r({password:"Invalid credentials"}):404===(null===e.t0||void 0===e.t0||null===(j=e.t0.response)||void 0===j?void 0:j.status)?r({email:"No user found"}):400===(null===e.t0||void 0===e.t0||null===(b=e.t0.response)||void 0===b?void 0:b.status)?a(null===(x=e.t0.response)||void 0===x||null===(p=x.data)||void 0===p?void 0:p.non_field_errors):500===(null===e.t0||void 0===e.t0||null===(h=e.t0.response)||void 0===h?void 0:h.status)?a("Server error"):r(D(e.t0));case 13:case"end":return e.stop()}var d}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.jsx)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(r.jsxs)(O.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(r.jsx)(x.a,{mb:"4",justify:"center",onClick:function(){return i.push("/")},cursor:"pointer",children:Object(r.jsx)(xe.a,{src:"/discord-logo.png",w:"80px"})}),Object(r.jsx)(x.a,{mb:"4",justify:"center",children:Object(r.jsx)(T.a,{variant:"small",color:"red.300",children:n})}),Object(r.jsxs)(O.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(r.jsx)(O.a,{textAlign:"center",children:Object(r.jsx)(f.a,{fontSize:"24px",children:"Welcome Back"})}),Object(r.jsx)(O.a,{my:4,textAlign:"left",children:Object(r.jsx)(A.b,{initialValues:{email:"",password:""},validationSchema:H,onSubmit:l,children:function(e){var t=e.isSubmitting;return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(K,{label:"Email",name:"email",autoComplete:"email",type:"email"}),Object(r.jsx)(K,{label:"password",name:"password",autoComplete:"password",type:"password"}),Object(r.jsx)(O.a,{mt:4,children:Object(r.jsx)(At.a,{as:De.b,to:"/forgot-password",textColor:"highlight.standard",children:"Forgot Password?"})}),Object(r.jsx)(v.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:t,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},children:"Login"}),Object(r.jsxs)(T.a,{mt:"4",children:["Don't have an account yet?"," ",Object(r.jsx)(At.a,{as:De.b,to:"/register",textColor:"highlight.standard",children:"Sign Up"})]})]})}})})]})]})})}function Nt(){var e=c.a.useState(null),t=Object(I.a)(e,2),n=t[0],a=t[1],i=Object(o.useHistory)(),s=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,c,s,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,e.prev=1,e.next=4,d=t,R.post("/api/auth/users/",d);case 4:c=e.sent,c.data&&i.push("/login"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),400===(null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)?a(null===(l=e.t0.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.non_field_errors):500===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)?a("Server error"):r(D(e.t0));case 12:case"end":return e.stop()}var d}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.jsx)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(r.jsxs)(O.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(r.jsx)(x.a,{mb:"4",justify:"center",onClick:function(){return i.push("/")},cursor:"pointer",children:Object(r.jsx)(xe.a,{src:"/discord-logo.png",w:"80px"})}),Object(r.jsx)(x.a,{mb:"4",justify:"center",children:Object(r.jsx)(T.a,{variant:"small",color:"red.300",children:n})}),Object(r.jsxs)(O.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(r.jsx)(O.a,{textAlign:"center",children:Object(r.jsx)(f.a,{fontSize:"24px",children:"Welcome to Document Repository"})}),Object(r.jsx)(O.a,{my:4,textAlign:"left",children:Object(r.jsx)(A.b,{initialValues:{email:"",password:""},validationSchema:W,onSubmit:s,children:function(e){var t=e.isSubmitting;return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(K,{label:"Full Name",name:"name",autoComplete:"name",type:"text"}),Object(r.jsx)(K,{label:"Email",name:"email",autoComplete:"email",type:"email"}),Object(r.jsx)(K,{label:"password",name:"password",autoComplete:"password",type:"password"}),Object(r.jsx)(v.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:t,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},children:"Register"}),Object(r.jsxs)(T.a,{mt:"4",children:["Already have an account?"," ",Object(r.jsx)(At.a,{as:De.b,to:"/login",textColor:"highlight.standard",children:"Sign In"})]})]})}})})]})]})})}function Ht(){var e=Object(o.useHistory)(),t=Object(o.useParams)().token,n=Object(a.useState)(""),c=Object(I.a)(n,2),i=c[0],s=c[1],u=F((function(e){return e.setUser}));function b(){return(b=Object(j.a)(d.a.mark((function n(r,a){var c,i,o,j;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=a.setErrors,n.prev=1,n.next=4,L(Object(l.a)(Object(l.a)({},r),{},{token:t}));case 4:i=n.sent,(o=i.data)&&(u(o),e.push("/channels/me")),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),"token"in(j=D(n.t0))&&s(j.token),c(j);case 14:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return Object(r.jsx)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(r.jsxs)(O.a,{px:4,width:"full",maxWidth:"500px",textAlign:"center",children:[Object(r.jsx)(x.a,{mb:"4",justify:"center",children:Object(r.jsx)(xe.a,{src:"/logo.png",w:"80px"})}),Object(r.jsxs)(O.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(r.jsx)(O.a,{textAlign:"center",children:Object(r.jsx)(f.a,{fontSize:"24px",children:"Reset Password"})}),Object(r.jsxs)(O.a,{my:4,textAlign:"left",children:[Object(r.jsx)(A.b,{initialValues:{newPassword:"",confirmNewpassword:""},validationSchema:U,onSubmit:function(e,t){return b.apply(this,arguments)},children:function(e){var t=e.isSubmitting;return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(K,{label:"New Password",name:"newPassword",autoComplete:"new-password",type:"password"}),Object(r.jsx)(K,{label:"Confirm New Password",name:"confirmNewPassword",type:"password"}),Object(r.jsx)(v.a,{background:"highlight.standard",color:"white",width:"full",mt:4,type:"submit",isLoading:t,_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},children:"Reset Password"})]})}}),i?Object(r.jsxs)(x.a,{direction:"column",mt:"4",justify:"center",align:"center",children:[Object(r.jsx)(T.a,{children:"Invalid or expired token."}),Object(r.jsx)(At.a,{as:De.b,to:"/forgot-password",color:"red",children:"Click here to get a new token"})]}):null]})]})]})})}function Wt(e){var t=e.handleSearch;return Object(r.jsx)(Oe.b,{gridColumn:3,gridRow:"1",bg:"brandGray.light",padding:"10px",zIndex:"2",boxShadow:"md",children:Object(r.jsx)(x.a,{align:"center",justify:"space-between",p:"2",children:Object(r.jsx)(J.a,{placeholder:"Search users",onChange:t})})})}function Ut(e){var t=e.user,n=Object(o.useHistory)();return Object(r.jsxs)(Be.f,{_hover:{bg:"brandGray.dark"},children:[Object(r.jsx)(Be.c,{children:Object(r.jsxs)(x.a,{align:"center",w:"full",_hover:{cursor:"pointer"},children:[Object(r.jsx)(St.a,{size:"sm",src:null===t||void 0===t?void 0:t.image,children:Object(r.jsx)(St.b,{boxSize:"1.25em",bg:t.isOnline?"green.500":"gray.500"})}),Object(r.jsx)(T.a,{ml:"2",fontSize:"sm",children:null===t||void 0===t?void 0:t.name})]})}),Object(r.jsx)(Be.c,{children:Object(r.jsx)(Ye.a,{size:"md",borderRadius:"full",variant:"subtle",colorScheme:"cyan",children:Object(r.jsx)(Ye.b,{children:C[null===t||void 0===t?void 0:t.access_level]})})}),Object(r.jsx)(Be.c,{children:Object(r.jsx)(Ye.a,{size:"md",borderRadius:"full",variant:"solid",colorScheme:t.is_active?"green":"red",children:Object(r.jsx)(Ye.b,{children:t.is_active?"Active":"Inactive"})})}),Object(r.jsx)(Be.c,{children:Object(r.jsxs)(Me.a,{children:[Object(r.jsx)(Me.b,{as:Ve.a,"aria-label":"Options",icon:Object(r.jsx)(Ie.b,{}),variant:"outline"}),Object(r.jsx)(Me.d,{children:Object(r.jsx)(Me.c,{icon:Object(r.jsx)(Ie.d,{}),command:"\u2318T",onClick:function(){return n.push("/users/".concat(null===t||void 0===t?void 0:t.pk))},children:"View user"})})]})})]})}function Bt(e){var t=e.users;return 0===(null===t||void 0===t?void 0:t.length)?Object(r.jsx)(x.a,{justify:"center",align:"center",w:"full",children:Object(r.jsx)(T.a,{textColor:"brandGray.accent",children:"No files uploaded yet"})}):Object(r.jsxs)(O.a,{w:"full",children:[Object(r.jsx)(Ot,{label:"Files \u2014 ".concat((null===t||void 0===t?void 0:t.length)||0)}),Object(r.jsxs)(Be.a,{w:"full",children:[Object(r.jsx)(Be.e,{bg:"brandGray.darker",p:"2",mx:"2",children:Object(r.jsxs)(Be.f,{children:[Object(r.jsx)(Be.d,{children:"Name"}),Object(r.jsx)(Be.d,{children:"Access level"}),Object(r.jsx)(Be.d,{children:"status"}),Object(r.jsx)(Be.d,{children:"Action"})]})}),Object(r.jsx)(Be.b,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(r.jsx)(Ut,{user:e},e.id)}))})]})]})}function Yt(){var e=Object(te.a)("users",(function(){return le()})),t=e.data,n=e.isLoading,a=vt(t),c=a.filteredData,i=a.handleSearch;return n?Object(r.jsx)(mt,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Wt,{handleSearch:i}),Object(r.jsx)(Oe.b,{gridColumn:3,gridRow:"2",bg:"brandGray.light",mr:"5px",display:"flex",overflowY:"auto",css:jt,children:Object(r.jsx)(Bt,{users:c||t})})]})}var Mt=function(){return Object(r.jsxs)(fe,{children:[Object(r.jsx)(We,{}),Object(r.jsx)(zt,{}),Object(r.jsx)(Yt,{})]})};function Vt(){var e=Object(ge.useParams)().userId,t=function(e){return Object(te.a)(["users",e],(function(){return oe(e)}))}(e),n=t.data,a=t.isLoading,c=de().data,i=(null===c||void 0===c?void 0:c.email)===(null===n||void 0===n?void 0:n.email),s=je(),u=Object(o.useHistory)();function b(){return(b=Object(j.a)(d.a.mark((function t(n,r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.setErrors;try{delete(n=Object(l.a)(Object(l.a)({},n),{},{access_level:+n.accessLevel})).email,delete n.accessLevel,s.mutate(Object(l.a)(Object(l.a)({},n),{},{userId:e}))}catch(c){a(D(c))}case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a?Object(r.jsx)(mt,{}):Object(r.jsx)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:Object(r.jsxs)(O.a,{px:4,width:"full",maxWidth:"500px",children:[Object(r.jsx)(x.a,{mb:"4",justify:"center",children:Object(r.jsx)(f.a,{fontSize:"24px",children:"".concat((null===n||void 0===n?void 0:n.name)||"USER","'s Profile")})}),Object(r.jsxs)(O.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(A.b,{initialValues:{email:null===n||void 0===n?void 0:n.email,name:null===n||void 0===n?void 0:n.name,accessLevel:null===n||void 0===n?void 0:n.access_level,role:null===n||void 0===n?void 0:n.role,image:null},onSubmit:function(e,t){return b.apply(this,arguments)},children:function(e){var t=e.isSubmitting,n=e.values;return Object(r.jsx)(A.a,{children:Object(r.jsxs)(O.a,{my:4,children:[Object(r.jsx)(K,{value:n.name,placeholder:"Full name",label:"name",name:"name",autoComplete:"name"}),Object(r.jsx)(K,{value:n.email,type:"email",placeholder:"Email",label:"Email",name:"email",autoComplete:"email",disabled:!0}),Object(r.jsxs)(ee,{value:n.accessLevel,label:"access level",name:"accessLevel",autoComplete:"access_level",isDisabled:i,children:[Object(r.jsx)("option",{value:0,children:"Lowest"}),Object(r.jsx)("option",{value:1,children:"Restricted"}),Object(r.jsx)("option",{value:2,children:"Confidential"}),Object(r.jsx)("option",{value:3,children:"Secret"}),Object(r.jsx)("option",{value:4,children:"Top Secret"})]}),Object(r.jsxs)(ee,{value:n.role,label:"role",name:"role",autoComplete:"role",isDisabled:i,children:[Object(r.jsx)("option",{value:1,children:"Admin"}),Object(r.jsx)("option",{value:2,children:"Normal"})]}),Object(r.jsxs)(x.a,{my:8,align:"end",children:[Object(r.jsx)(m.a,{}),Object(r.jsx)(v.a,{mr:4,colorScheme:"white",variant:"outline",onClick:u.goBack,fontSize:"14px",children:"Close"}),Object(r.jsx)(g.c,{children:Object(r.jsx)(v.a,{type:"submit",colorScheme:"green",isLoading:t,fontSize:"14px",children:"Update"})})]})]})})}})}),Object(r.jsx)(w.a,{my:"4"}),!i&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(x.a,{children:Object(r.jsx)(f.a,{fontSize:"18px",children:"AUTHENTICATION"})}),Object(r.jsxs)(x.a,{mt:"4",children:[Object(r.jsx)(v.a,{background:(null===n||void 0===n?void 0:n.is_active)?"red.400":"green.400",color:"white",type:"submit",_hover:{bg:"highlight.hover"},_active:{bg:"highlight.active"},_focus:{boxShadow:"none"},fontSize:"14px",w:"2xl",onClick:function(){var t=!(null===n||void 0===n?void 0:n.is_active);s.mutate({userId:e,is_active:t}),console.log({isActive:t})},children:(null===n||void 0===n?void 0:n.is_active)?"Deactivate":"Activate"}),Object(r.jsx)(m.a,{})]})]})]})]})})}n(541),n(280);var Qt=n(531);function Jt(e){var t=e.isOpen,n=e.onClose,a=e.title,i=e.message,s=e.handleSubmit,o=c.a.useRef();return Object(r.jsx)(Qt.a,{isOpen:t,leastDestructiveRef:o,onClose:n,children:Object(r.jsx)(q.g,{children:Object(r.jsxs)(Qt.b,{children:[Object(r.jsx)(q.f,{fontSize:"lg",fontWeight:"bold",children:a}),Object(r.jsx)(q.b,{children:i}),Object(r.jsxs)(q.e,{children:[Object(r.jsx)(v.a,{ref:o,onClick:n,children:"Cancel"}),Object(r.jsx)(v.a,{colorScheme:"red",onClick:s,ml:3,children:"Yes"})]})]})})})}function Xt(){var e=c.a.useState(!1),t=Object(I.a)(e,2),n=t[0],a=t[1],i=Object(ge.useParams)().fileId,s=function(e){return Object(te.a)(["files",e],(function(){return ye(e)}))}(i),u=s.data,h=s.isLoading,p=de().data,y=function(){var e=Object(b.a)(),t=Object(P.b)();return Object(ne.a)(Ce,{onSuccess:function(){t.invalidateQueries("files"),e({title:"File updated",status:"success",duration:3e3,isClosable:!0})},onError:function(){e({title:"Error updating file",status:"error",duration:3e3,isClosable:!0})}})}(),S=function(){var e=Object(b.a)(),t=Object(P.b)();return Object(ne.a)(ke,{onSuccess:function(){t.invalidateQueries("files"),e({title:"File deleted",status:"success",duration:3e3,isClosable:!0})},onError:function(){e({title:"Error deleting file",status:"error",duration:3e3,isClosable:!0})}})}(),C=1===(null===p||void 0===p?void 0:p.role),k=Object(o.useHistory)();function _(){return(_=Object(j.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setErrors;try{delete(t=Object(l.a)(Object(l.a)({},t),{},{access_level:+t.accessLevel})).accessLevel,console.log({values:t}),y.mutate(Object(l.a)(Object(l.a)({},t),{},{fileId:i}))}catch(a){r(D(a))}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return h?Object(r.jsx)(mt,{}):Object(r.jsxs)(x.a,{minHeight:"100vh",width:"full",align:"center",justifyContent:"center",children:[Object(r.jsxs)(O.a,{px:4,width:"full",maxWidth:"500px",children:[Object(r.jsx)(x.a,{mb:"4",justify:"center",children:Object(r.jsx)(f.a,{fontSize:"24px",children:"FILE DETAILS"})}),Object(r.jsxs)(O.a,{p:4,borderRadius:4,background:"brandGray.light",children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(A.b,{initialValues:{name:null===u||void 0===u?void 0:u.name,type:null===u||void 0===u?void 0:u.type,accessLevel:null===u||void 0===u?void 0:u.access_level},onSubmit:function(e,t){return _.apply(this,arguments)},children:function(e){var t=e.isSubmitting,n=e.values;return Object(r.jsx)(A.a,{children:Object(r.jsxs)(O.a,{my:4,children:[Object(r.jsx)(K,{value:n.name,placeholder:"File name",label:"name",name:"name",autoComplete:"name"}),Object(r.jsx)(K,{value:n.type,placeholder:"File type",label:"type",name:"type",autoComplete:"type",isDisabled:!0}),Object(r.jsxs)(ee,{value:n.accessLevel,label:"access level",name:"accessLevel",autoComplete:"access_level",isDisabled:!C,children:[Object(r.jsx)("option",{value:0,children:"Lowest"}),Object(r.jsx)("option",{value:1,children:"Restricted"}),Object(r.jsx)("option",{value:2,children:"Confidential"}),Object(r.jsx)("option",{value:3,children:"Secret"}),Object(r.jsx)("option",{value:4,children:"Top Secret"})]}),Object(r.jsxs)(x.a,{my:8,align:"end",children:[Object(r.jsx)(m.a,{}),Object(r.jsx)(v.a,{mr:4,colorScheme:"white",variant:"outline",onClick:k.goBack,fontSize:"14px",children:"Close"}),Object(r.jsx)(g.c,{children:Object(r.jsx)(v.a,{type:"submit",colorScheme:"green",isLoading:t,fontSize:"14px",children:"Update"})})]})]})})}})}),Object(r.jsx)(w.a,{my:"4"}),Object(r.jsxs)(x.a,{mt:"4",children:[Object(r.jsx)("span",{}),Object(r.jsx)(v.a,{colorScheme:"red",fontSize:"14px",onClick:function(){return a(!0)},children:"Delete File"})]})]})]}),n&&Object(r.jsx)(Jt,{isOpen:n,onClose:function(){return a(!1)},handleSubmit:function(){S.mutate({fileId:i}),k.push("/files")},title:"Delete File",message:"Are you sure? You can't undo this action afterwards."})]})}function Kt(){return Object(r.jsxs)(o.Switch,{children:[Object(r.jsx)(o.Route,{exact:!0,path:"/",component:qt}),Object(r.jsx)(o.Route,{path:"/login",component:Tt}),Object(r.jsx)(o.Route,{path:"/register",component:Nt}),Object(r.jsx)(o.Route,{path:"/forgot-password",component:pe}),Object(r.jsx)(o.Route,{path:"/reset-password/:token",component:Ht}),Object(r.jsx)(he,{path:"/home",component:Lt}),Object(r.jsx)(he,{path:"/files/:fileId",component:Xt}),Object(r.jsx)(he,{path:"/files",component:Lt}),Object(r.jsx)(he,{path:"/users/:userId",component:Vt}),Object(r.jsx)(he,{path:"/users",component:Mt}),Object(r.jsx)(he,{path:"/account",component:be})]})}var Zt=n(532),$t=n(543);function en(e){var t=e.children,n=F((function(e){return e.current})),c=qe((function(e){return e.increment}));return Object(a.useEffect)((function(){}),[n,c]),Object(r.jsx)(r.Fragment,{children:t})}var tn=new(n(539).a)({defaultOptions:{queries:{refetchOnWindowFocus:!0,staleTime:1/0,cacheTime:0}}});function nn(e){var t=e.children;return Object(r.jsxs)(P.a,{client:tn,children:[Object(r.jsx)(Zt.a,{}),Object(r.jsx)($t.a,{theme:dt,children:Object(r.jsx)(en,{children:Object(r.jsx)(De.a,{children:t})})})]})}n(447);s.a.render(Object(r.jsx)(nn,{children:Object(r.jsx)(Kt,{})}),document.getElementById("root"))}},[[448,1,2]]]);
//# sourceMappingURL=main.59f5f91e.chunk.js.map